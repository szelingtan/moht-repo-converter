<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOHT Project Converter</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
            <header>
        <h1>Meet Callie,</h1>
        <p>Your sidekick to support with converting between form fields and HTML</p>
    </header>

        <div class="tabs">
            <button class="tab-button active">Form to HTML</button>
            <button class="tab-button">HTML to Form</button>
            <button class="tab-button">User Guide</button>
        </div>

        <!-- Form to HTML Tab -->
        <div id="form-to-html" class="tab-content active">
            <div class="main-content">
                <!-- Mode Toggle -->
                <div id="mode-toggle-container" class="mode-toggle">
                    <button id="mode-projects" class="mode-toggle-button active">Projects</button>
                    <button id="mode-workflows" class="mode-toggle-button">Workflows</button>
                </div>
                
                <div class="form-preview-grid">
                    <div class="form-container">
                        <form id="project-form">
                            <!-- Project Details Section -->
                            <div id="project-details-section" class="form-section">
                                <h2 id="project-details-title">Project Details</h2>
                        <div class="form-group">
                            <label for="title">Title:</label>
                            <input type="text" id="title" name="title" placeholder="Enter project title">
                        </div>
                        
                        <div class="form-group">
                            <label for="poc">POC (Point of Contact):</label>
                            <input type="email" id="poc" name="poc" placeholder="Enter email address">
                        </div>
                        
                        <div class="form-group">
                            <label for="partner-button">Partners:</label>
                            <div class="multi-select-container">
                                <div class="multi-select-button" id="partner-button">
                                    <span id="partner-display">Select partners...</span>
                                    <span class="dropdown-arrow"></span>
                                </div>
                                <div class="multi-select-dropdown" id="partner-dropdown">
                                    <div class="category-option">
                                        <input type="checkbox" id="partner-acute" value="Acute Hospitals">
                                        <label for="partner-acute">Acute Hospitals</label>
                                    </div>
                                    <div class="category-option">
                                        <input type="checkbox" id="partner-community-hospital" value="Within Community Hospital">
                                        <label for="partner-community-hospital">Within Community Hospital</label>
                                    </div>
                                    <div class="category-option">
                                        <input type="checkbox" id="partner-community-partners" value="Community Partners">
                                        <label for="partner-community-partners">Community Partners</label>
                                    </div>
                                    <div class="category-option other-option">
                                        <div class="category-option-header">
                                            <input type="checkbox" id="partner-other" value="Other">
                                            <label for="partner-other">Other:</label>
                                        </div>
                                        <input type="text" id="partner-other-text" placeholder="Please specify..." disabled>
                                    </div>
                                </div>
                                <div class="selected-tags" id="partner-tags"></div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="category-button">Category:</label>
                            <div class="multi-select-container">
                                <div class="multi-select-button" id="category-button">
                                    <span id="category-display">Select categories...</span>
                                    <span class="dropdown-arrow"></span>
                                </div>
                                <div class="multi-select-dropdown" id="category-dropdown">
                                    <div class="category-option">
                                        <input type="checkbox" id="cat-admission" value="Admission">
                                        <label for="cat-admission">Admission</label>
                                    </div>
                                    <div class="category-option">
                                        <input type="checkbox" id="cat-inpatient" value="Inpatient">
                                        <label for="cat-inpatient">Inpatient</label>
                                    </div>
                                    <div class="category-option">
                                        <input type="checkbox" id="cat-discharge" value="Discharge">
                                        <label for="cat-discharge">Discharge</label>
                                    </div>
                                    <div class="category-option">
                                        <input type="checkbox" id="cat-workflows" value="Workflows">
                                        <label for="cat-workflows">Workflows</label>
                                    </div>
                                    <div class="category-option other-option">
                                        <div class="category-option-header">
                                            <input type="checkbox" id="cat-other" value="Other">
                                            <label for="cat-other">Other:</label>
                                        </div>
                                        <input type="text" id="category-other-text" placeholder="Please specify..." disabled>
                                    </div>
                                </div>
                                <div class="selected-tags" id="category-tags"></div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="status">Status:</label>
                            <select id="status" name="status">
                                <option value="">Select status</option>
                                <option value="Planning">Planning</option>
                                <option value="Standard Care">Standard Care</option>
                                <option value="Ongoing">Ongoing</option>
                                <option value="Continued">Continued</option>
                            </select>
                        </div>
                        
                    </div>
                
                    <!-- Project Summary Section -->
                    <div id="project-summary-section" class="form-section">
                        <h2>Project Summary</h2>
                        
                        <div class="form-group">
                            <label for="project-dates">Project Dates:</label>
                            <input type="text" id="project-dates" name="project-dates" placeholder="e.g., October 2018 - March 2019">
                        </div>
                        
                        <div class="form-group">
                            <label for="sample-size">Sample Size:</label>
                            <textarea id="sample-size" name="sample-size" rows="3" placeholder="Describe the sample size and scope"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="reason">Reason for Action:</label>
                            <textarea id="reason" name="reason" rows="3" placeholder="Explain the reason for this project"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="objectives">Aim / Objective:</label>
                            <textarea id="objectives" name="objectives" rows="5" placeholder="Enter objectives (one per line for bullet points)"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="stakeholders">Stakeholders:</label>
                            <textarea id="stakeholders" name="stakeholders" rows="3" placeholder="List all stakeholders"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="interventions">Interventions:</label>
                            <textarea id="interventions" name="interventions" rows="8" placeholder="Describe interventions (use numbered format for ordered list)"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="outcomes">Outcomes:</label>
                            <textarea id="outcomes" name="outcomes" rows="8" placeholder="Describe outcomes (use numbered format for ordered list)"></textarea>
                        </div>
                        
                    </div>
                </form>
            </div>

            <div class="preview-section">
                    <h2>Preview & Generated HTML</h2>
                    <div class="preview-controls">
                        <button data-action="copy-html">Copy HTML</button>
                        <button data-action="download-html">Download HTML</button>
                        <button data-action="clear-form">Clear Form</button>
                    </div>
                    <div id="preview-container">
                        <div id="html-preview">
                            <!-- Generated preview will appear here -->
                        </div>
                    </div>
                    <div class="html-code">
                        <h3>Generated HTML Code:</h3>
                        <textarea id="html-output" readonly></textarea>
                    </div>
                </div>
            </div>
        </div>
    </div>
        </div>

        <!-- HTML to Form Tab -->
        <div id="html-to-form" class="tab-content">
            <div class="html-input-section">
                <h2>Paste HTML Code</h2>
                <p class="input-note"><strong>Note:</strong> Code will be automatically converted to Project or Workflow format based on the structure - no need to toggle modes.</p>
                <textarea id="html-input" placeholder="Paste your HTML table code here..." rows="15"></textarea>
                <div class="form-actions">
                    <button type="button" data-action="parse-html">Parse to Form</button>
                    <button type="button" data-action="clear-html-input">Clear</button>
                </div>
                <div id="parse-error" class="error-message"></div>
            </div>
        </div>

        <!-- User Guide Tab -->
        <div id="user-guide" class="tab-content">
            <div class="guide-section">
                <h2>📚 How to use Callie</h2>
                
                <div class="guide-content">
                    <div class="guide-item">
                        <h3>🔄 Form to HTML</h3>
                        <p>Convert your project / workflows details into properly formatted HTML tables:</p>
                        <ol>
                            <li><strong>Fill out the form:</strong> Enter your project details in the form fields on the left</li>
                            <li><strong>Watch the preview:</strong> The HTML preview updates automatically as you type</li>
                            <li><strong>Copy or download:</strong> Use the "Copy HTML" button to copy to clipboard, or "Download HTML" to save as a file</li>
                        </ol>
                        <div class="tip">
                            <strong>💡 Tips:</strong>
                            <ul>
                                <li>For objectives, interventions, and outcomes: Enter each point on a new line to create bullet/numbered lists</li>
                                <li>Email addresses in the POC field automatically become clickable mailto links</li>
                                <li>The preview updates in real-time, so you can see changes immediately</li>
                                <li>Category and Partners: Select multiple predefined options or use "Other" to specify custom categories</li>
                            </ul>
                        </div>
                        
                        <div class="mode-info">
                            <strong>💻 Project vs Workflow Modes:</strong>
                            <ul>
                                <li><strong>Projects Mode:</strong> Full form with Project Details + Project Summary sections</li>
                                <li><strong>Workflows Mode:</strong> Simplified form with only Project Details (Title, POC, Partners, Category, Status)</li>
                            </ul>
                        </div>
                    </div>

                    <div class="guide-item">
                        <h3>📋 HTML to Form</h3>
                        <p>Convert existing HTML tables back to editable form fields:</p>
                        <ol>
                            <li><strong>Switch to "HTML to Form" tab:</strong> Click the tab at the top</li>
                            <li><strong>Paste your HTML:</strong> Copy and paste your existing HTML table code</li>
                            <li><strong>Parse the HTML:</strong> Click "Parse to Form" to extract the data</li>
                            <li><strong>Edit and regenerate:</strong> You'll be redirected to the form tab where you can edit and regenerate</li>
                        </ol>
                        <div class="tip">
                            <strong>💡 Notes:</strong>
                            <ul>
                                <li>Works with HTML tables that follow the Project / Workflow format</li>
                                <li>Automatically extracts bullet points and numbered lists back to text format</li>
                                <li>Handles email links and converts them back to plain email addresses</li>
                                <li><strong>Auto-detection:</strong> System automatically detects and switches to the appropriate mode (Projects vs Workflows) based on HTML structure</li>
                            </ul>
                        </div>
                    </div>

                    <div class="guide-item">
                        <h3>📊 Understanding the Form Fields</h3>
                        <div class="field-guide">
                            <h4>Project Details Section:</h4>
                            <ul>
                                <li><strong>Title:</strong> The main project name/title</li>
                                <li><strong>POC:</strong> Point of Contact email address</li>
                                <li><strong>Partners:</strong> Organizations involved</li>
                                <li><strong>Category:</strong> Primary purpose - select multiple options (Admission, Inpatient, Discharge, Workflows) or specify custom categories</li>
                                <li><strong>Status:</strong> Current project status</li>
                            </ul>
                            
                            <h4>Project Summary Section:</h4>
                            <ul>
                                <li><strong>Project Dates:</strong> Timeline (e.g., "October 2018 - March 2019")</li>
                                <li><strong>Sample Size:</strong> Scope and scale of the project</li>
                                <li><strong>Reason for Action:</strong> Why this project was needed</li>
                                <li><strong>Aim/Objective:</strong> Project goals (each line becomes a bullet point)</li>
                                <li><strong>Stakeholders:</strong> All parties involved or affected</li>
                                <li><strong>Interventions:</strong> Actions taken (each line becomes numbered)</li>
                                <li><strong>Outcomes:</strong> Results achieved (each line becomes numbered)</li>
                            </ul>
                        </div>
                    </div>

                    <div class="guide-item">
                        <h3>❓ Troubleshooting</h3>
                        <div class="troubleshooting">
                            <h4>Potential Issues:</h4>
                            <ul>
                                <li><strong>HTML parsing fails:</strong> Ensure your HTML is valid and follows table structure</li>
                                <li><strong>Lists not formatting:</strong> Put each item on a new line in text areas</li>
                                <li><strong>Email not clickable:</strong> Ensure valid email format in POC field</li>
                            </ul>
                            
                            <h4>Browser Requirements:</h4>
                            <ul>
                                <li>Chrome/Chromium (recommended)</li>
                                <li>Firefox</li>
                                <li>Safari</li>
                                <li>Edge</li>
                            </ul>
                        </div>
                    </div>

                    <div class="guide-item">
                        <h3>🚀 Quick Start Example</h3>
                        <div class="example">
                            <p>Try this sample data to see how it works:</p>
                            <button data-action="load-sample-data" class="sample-button">Load Sample Project Data</button>
                            <p><em>This will fill the form with example data so you can see the converter in action.</em></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Load configuration first -->
    <script src="js/config.js"></script>
    
    <!-- Load managers -->
    <script src="js/managers/CategoryManager.js"></script>
    <script src="js/managers/PartnerManager.js"></script>
    <script src="js/managers/ModeManager.js"></script>
    <script src="js/managers/FormDataManager.js"></script>
    <script src="js/managers/UIManager.js"></script>
    <script src="js/managers/TabManager.js"></script>
    <script src="js/managers/EventManager.js"></script>
    
    <!-- Load generators and parsers -->
    <script src="js/generators/HTMLGenerator.js"></script>
    <script src="js/parsers/HTMLParser.js"></script>
    
    <!-- Load main application -->
    <script src="js/MOHTProjectConverter.js"></script>
    
    <!-- Initialize application -->
    <script src="js/app.js"></script>
</body>
</html>
